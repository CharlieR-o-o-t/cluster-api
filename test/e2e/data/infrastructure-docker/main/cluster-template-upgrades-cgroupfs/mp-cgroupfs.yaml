# KubeadmConfigTemplate referenced by the MachinePool for cgroupfs
apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
kind: KubeadmConfig
metadata:
  name: "${CLUSTER_NAME}-mp-0-config-cgroupfs"
spec:
  joinConfiguration:
    # node registration parameters are automatically injected by CAPD according to the kindest/node image in use.
    nodeRegistration:
      kubeletExtraArgs:
        # We have to pin the cgroupDriver to cgroupfs as kubeadm >=1.21 defaults to systemd
        # kind will implement systemd support in: https://github.com/kubernetes-sigs/kind/issues/1726
        cgroup-driver: cgroupfs
